import React, { useState } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { Icon } from '@iconify/react';

// Emoji categories with their emojis
const emojiCategories = [
  {
    name: 'Smileys',
    icon: 'mdi:emoticon-outline',
    emojis: ['ðŸ˜€', 'ðŸ˜', 'ðŸ˜‚', 'ðŸ¤£', 'ðŸ˜ƒ', 'ðŸ˜„', 'ðŸ˜…', 'ðŸ˜†', 'ðŸ˜‰', 'ðŸ˜Š', 'ðŸ˜‹', 'ðŸ˜Ž', 'ðŸ˜', 'ðŸ¥°', 'ðŸ˜˜', 'ðŸ˜—', 'ðŸ˜™', 'ðŸ˜š', 'ðŸ™‚', 'ðŸ¤—', 'ðŸ¤”', 'ðŸ¤¨', 'ðŸ˜', 'ðŸ˜‘', 'ðŸ˜¶', 'ðŸ™„', 'ðŸ˜', 'ðŸ˜£', 'ðŸ˜¥', 'ðŸ˜®', 'ðŸ¤', 'ðŸ˜¯', 'ðŸ˜ª', 'ðŸ˜«', 'ðŸ˜´', 'ðŸ˜Œ', 'ðŸ˜›', 'ðŸ˜œ', 'ðŸ˜', 'ðŸ¤¤']
  },
  {
    name: 'Gestures',
    icon: 'mdi:hand-wave-outline',
    emojis: ['ðŸ‘‹', 'ðŸ¤š', 'âœ‹', 'ðŸ––', 'ðŸ‘Œ', 'ðŸ¤Œ', 'ðŸ¤', 'âœŒï¸', 'ðŸ¤ž', 'ðŸ¤Ÿ', 'ðŸ¤˜', 'ðŸ¤™', 'ðŸ‘ˆ', 'ðŸ‘‰', 'ðŸ‘†', 'ðŸ–•', 'ðŸ‘‡', 'â˜ï¸', 'ðŸ‘', 'ðŸ‘Ž', 'âœŠ', 'ðŸ‘Š', 'ðŸ¤›', 'ðŸ¤œ', 'ðŸ‘', 'ðŸ™Œ', 'ðŸ‘', 'ðŸ¤²', 'ðŸ™', 'âœï¸', 'ðŸ’…', 'ðŸ¤³', 'ðŸ’ª', 'ðŸ¦¾', 'ðŸ¦¿', 'ðŸ¦µ', 'ðŸ¦¶', 'ðŸ‘‚', 'ðŸ¦»', 'ðŸ‘ƒ', 'ðŸ«€', 'ðŸ«', 'ðŸ§ ', 'ðŸ¦·', 'ðŸ¦´', 'ðŸ‘€', 'ðŸ‘ï¸', 'ðŸ‘…', 'ðŸ‘„']
  },
  {
    name: 'People',
    icon: 'mdi:account-outline',
    emojis: ['ðŸ‘¶', 'ðŸ‘§', 'ðŸ§’', 'ðŸ‘¦', 'ðŸ‘©', 'ðŸ§‘', 'ðŸ‘¨', 'ðŸ‘©â€ðŸ¦±', 'ðŸ‘¨â€ðŸ¦±', 'ðŸ‘©â€ðŸ¦°', 'ðŸ‘¨â€ðŸ¦°', 'ðŸ‘±â€â™€ï¸', 'ðŸ‘±â€â™‚ï¸', 'ðŸ‘©â€ðŸ¦³', 'ðŸ‘¨â€ðŸ¦³', 'ðŸ‘©â€ðŸ¦²', 'ðŸ‘¨â€ðŸ¦²', 'ðŸ§”', 'ðŸ‘µ', 'ðŸ§“', 'ðŸ‘´', 'ðŸ‘²', 'ðŸ‘³â€â™€ï¸', 'ðŸ‘³â€â™‚ï¸', 'ðŸ§•', 'ðŸ‘®â€â™€ï¸', 'ðŸ‘®â€â™‚ï¸', 'ðŸ‘·â€â™€ï¸', 'ðŸ‘·â€â™‚ï¸', 'ðŸ’‚â€â™€ï¸', 'ðŸ’‚â€â™‚ï¸', 'ðŸ•µï¸â€â™€ï¸', 'ðŸ•µï¸â€â™‚ï¸', 'ðŸ‘©â€âš•ï¸', 'ðŸ‘¨â€âš•ï¸', 'ðŸ‘©â€ðŸŒ¾', 'ðŸ‘¨â€ðŸŒ¾']
  },
  {
    name: 'Animals',
    icon: 'mdi:cat',
    emojis: ['ðŸ¶', 'ðŸ±', 'ðŸ­', 'ðŸ¹', 'ðŸ°', 'ðŸ¦Š', 'ðŸ»', 'ðŸ¼', 'ðŸ»â€â„ï¸', 'ðŸ¨', 'ðŸ¯', 'ðŸ¦', 'ðŸ®', 'ðŸ·', 'ðŸ½', 'ðŸ¸', 'ðŸµ', 'ðŸ™ˆ', 'ðŸ™‰', 'ðŸ™Š', 'ðŸ’', 'ðŸ”', 'ðŸ§', 'ðŸ¦', 'ðŸ¤', 'ðŸ£', 'ðŸ¥', 'ðŸ¦†', 'ðŸ¦¢', 'ðŸ¦…', 'ðŸ¦‰', 'ðŸ¦¤', 'ðŸª¶', 'ðŸ¦©', 'ðŸ¦š', 'ðŸ¦œ', 'ðŸ', 'ðŸ¦Ž', 'ðŸ²', 'ðŸ‰', 'ðŸ¦•', 'ðŸ¦–', 'ðŸ³', 'ðŸ¬', 'ðŸ¦­', 'ðŸŸ', 'ðŸ ', 'ðŸ¡']
  },
  {
    name: 'Food',
    icon: 'mdi:food-apple-outline',
    emojis: ['ðŸŽ', 'ðŸ', 'ðŸŠ', 'ðŸ‹', 'ðŸŒ', 'ðŸ‰', 'ðŸ‡', 'ðŸ“', 'ðŸ«', 'ðŸˆ', 'ðŸ’', 'ðŸ‘', 'ðŸ¥­', 'ðŸ', 'ðŸ¥¥', 'ðŸ¥', 'ðŸ…', 'ðŸ†', 'ðŸ¥‘', 'ðŸ¥¦', 'ðŸ¥¬', 'ðŸ¥’', 'ðŸŒ¶ï¸', 'ðŸ«‘', 'ðŸ¥”', 'ðŸ§„', 'ðŸ§…', 'ðŸ¥•', 'ðŸŒ½', 'ðŸ¥—', 'ðŸ¥˜', 'ðŸ', 'ðŸ•', 'ðŸŒ®', 'ðŸŒ¯', 'ðŸ¥™', 'ðŸ§†', 'ðŸ¥š', 'ðŸ³', 'ðŸ¥ž', 'ðŸ§‡']
  },
  {
    name: 'Activities',
    icon: 'mdi:basketball',
    emojis: ['âš½', 'ðŸ€', 'ðŸˆ', 'âš¾', 'ðŸ¥Ž', 'ðŸŽ¾', 'ðŸ', 'ðŸ‰', 'ðŸ¥', 'ðŸŽ±', 'ðŸª€', 'ðŸ“', 'ðŸ¸', 'ðŸ’', 'ðŸ‘', 'ðŸ¥', 'ðŸ', 'ðŸªƒ', 'ðŸ¥…', 'â›³', 'ðŸª', 'ðŸ¹', 'ðŸŽ£', 'ðŸ¤¿', 'ðŸ¥Š', 'ðŸ¥‹', 'ðŸŽ½', 'ðŸ›¹', 'ðŸ›¼', 'ðŸ›¶', 'ðŸŽ¿', 'â›·ï¸', 'ðŸ‚', 'ðŸª‚', 'ðŸ‹ï¸â€â™€ï¸', 'ðŸ‹ï¸â€â™‚ï¸', 'ðŸ¤¼â€â™€ï¸', 'ðŸ¤¼â€â™‚ï¸', 'ðŸ¤¸â€â™€ï¸', 'ðŸ¤¸â€â™‚ï¸', 'â›¹ï¸â€â™€ï¸', 'â›¹ï¸â€â™‚ï¸']
  },
  {
    name: 'Objects',
    icon: 'mdi:lightbulb-outline',
    emojis: ['âŒš', 'ðŸ“±', 'ðŸ“²', 'ðŸ’»', 'âŒ¨ï¸', 'ðŸ–¥ï¸', 'ðŸ–¨ï¸', 'ðŸ–±ï¸', 'ðŸ–²ï¸', 'ðŸ•¹ï¸', 'ðŸ—œï¸', 'ðŸ’½', 'ðŸ’¾', 'ðŸ’¿', 'ðŸ“€', 'ðŸ“¼', 'ðŸ“·', 'ðŸ“¸', 'ðŸ“¹', 'ðŸŽ¥', 'ðŸ“½ï¸', 'ðŸŽžï¸', 'ðŸ“ž', 'â˜Žï¸', 'ðŸ“Ÿ', 'ðŸ“ ', 'ðŸ“º', 'ðŸ“»', 'ðŸŽ™ï¸', 'ðŸŽšï¸', 'ðŸŽ›ï¸', 'ðŸ§­', 'â±ï¸', 'â²ï¸', 'â°', 'ðŸ•°ï¸', 'âŒ›', 'â³', 'ðŸ“¡', 'ðŸ”‹', 'ðŸ”Œ']
  },
  {
    name: 'Symbols',
    icon: 'mdi:heart-outline',
    emojis: ['â¤ï¸', 'ðŸ§¡', 'ðŸ’›', 'ðŸ’š', 'ðŸ’™', 'ðŸ’œ', 'ðŸ–¤', 'ðŸ¤', 'ðŸ¤Ž', 'ðŸ’”', 'â£ï¸', 'ðŸ’•', 'ðŸ’ž', 'ðŸ’“', 'ðŸ’—', 'ðŸ’–', 'ðŸ’˜', 'ðŸ’', 'ðŸ’Ÿ', 'â˜®ï¸', 'âœï¸', 'â˜ªï¸', 'ðŸ•‰ï¸', 'â˜¸ï¸', 'âœ¡ï¸', 'ðŸ”¯', 'ðŸ•Ž', 'â˜¯ï¸', 'â˜¦ï¸', 'ðŸ›', 'â›Ž', 'â™ˆ', 'â™‰', 'â™Š', 'â™‹', 'â™Œ', 'â™', 'â™Ž', 'â™', 'â™', 'â™‘', 'â™’', 'â™“', 'ðŸ†”']
  }
];

// Animation variants
const containerVariants = {
  hidden: { opacity: 0, y: 20, scale: 0.95 },
  visible: { 
    opacity: 1, 
    y: 0, 
    scale: 1,
    transition: { duration: 0.2, staggerChildren: 0.03 }
  },
  exit: { opacity: 0, y: 20, scale: 0.95, transition: { duration: 0.15 } }
};

const emojiVariants = {
  hidden: { opacity: 0, scale: 0.8 },
  visible: { opacity: 1, scale: 1 },
  hover: { scale: 1.2, transition: { duration: 0.1 } }
};

const EmojiPicker = ({ isOpen, onClose, onEmojiSelect }) => {
  const [activeCategory, setActiveCategory] = useState(emojiCategories[0]);

  return (
    <AnimatePresence>
      {isOpen && (
        <motion.div
          className="absolute bottom-full left-0 mb-2 z-50"
          initial="hidden"
          animate="visible"
          exit="exit"
          variants={containerVariants}
        >
          <div 
            className="bg-[#27272A] border border-[#3F3F46] rounded-lg shadow-lg p-2"
            style={{ width: '320px', maxHeight: '300px' }}
          >
            {/* Category Tabs */}
            <div className="flex overflow-x-auto mb-2 pb-1 scrollbar-hide">
              {emojiCategories.map((category) => (
                <motion.button
                  key={category.name}
                  className={`p-2 rounded-md flex-shrink-0 ${activeCategory.name === category.name ? 'bg-[#3F3F46]' : 'hover:bg-[#3F3F46]/50'}`}
                  onClick={() => setActiveCategory(category)}
                  whileHover={{ scale: 1.05 }}
                  whileTap={{ scale: 0.95 }}
                >
                  <Icon icon={category.icon} className="w-5 h-5 text-gray-300" />
                </motion.button>
              ))}
            </div>
            
            {/* Emoji Grid */}
            <div className="max-h-[200px] overflow-y-auto scrollbar-thin scrollbar-thumb-[#52525B] scrollbar-track-[#27272A] p-1">
              <div className="grid grid-cols-8 gap-1">
                {activeCategory.emojis.map((emoji, index) => (
                  <motion.button
                    key={`${emoji}-${index}`}
                    className="w-8 h-8 flex items-center justify-center rounded hover:bg-[#3F3F46] cursor-pointer text-xl"
                    onClick={() => onEmojiSelect(emoji)}
                    variants={emojiVariants}
                    whileHover="hover"
                  >
                    {emoji}
                  </motion.button>
                ))}
              </div>
            </div>
            
            {/* Footer */}
            <div className="flex justify-between items-center mt-2 pt-2 border-t border-[#3F3F46]">
              <span className="text-xs text-gray-400">{activeCategory.name}</span>
              <motion.button
                className="text-gray-400 hover:text-white"
                onClick={onClose}
                whileHover={{ scale: 1.1 }}
                whileTap={{ scale: 0.9 }}
              >
                <Icon icon="mdi:close" className="w-4 h-4" />
              </motion.button>
            </div>
          </div>
          
          {/* Click away overlay */}
          <div 
            className="fixed inset-0 z-40" 
            onClick={onClose}
            style={{ cursor: 'default' }}
          />
        </motion.div>
      )}
    </AnimatePresence>
  );
};

export default EmojiPicker; 